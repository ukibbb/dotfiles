# Terminal settings for proper key passthrough
set -g default-terminal "xterm-256color"
set -ga terminal-overrides ",xterm-256color:Tc"
# Ignore terminfo function key definitions - pass sequences through unchanged
set -as terminal-features ',xterm-256color:ignorefkeys'


# Extends the repeat key timeout to 1 second for repeatable bindings
# This gives more time between keypresses when using -r bindings like pane resizing
set -g repeat-time 1000

# Changes the default prefix key to Ctrl+s
# Doesn't conflict with Neovim or Ghostty
set -g prefix C-s

# Removes the default Ctrl-b prefix binding
unbind C-b

# Allows sending Ctrl+s to applications inside tmux
# Pressing Ctrl+s twice will send Ctrl+s to the underlying application
bind-key C-s send-prefix

# Removes the default % binding for horizontal split
# We're replacing it with a more intuitive keybinding
unbind %

# Creates a new vertical split (side-by-side panes) using the pipe symbol |
# The pipe visually represents a vertical line making it easy to remember
# -c option preserves the current working directory in the new pane
bind | split-window -h -c "#{pane_current_path}"

# Removes the default " (double-quote) binding for vertical split
# We're replacing it with a more intuitive keybinding
unbind '"'

# Creates a new horizontal split (stacked panes) using the minus symbol -
# The minus visually represents a horizontal line making it easy to remember
# -c option preserves the current working directory in the new pane
bind - split-window -v -c "#{pane_current_path}"

# Creates a new window preserving the current working directory
bind c new-window -c "#{pane_current_path}"

# Removes any existing binding for the 'r' key to avoid conflicts
# This ensures our custom reload binding works correctly
unbind r

# Binds 'r' key to reload the tmux configuration file without restarting tmux
# This allows you to apply changes to this config file immediately by pressing prefix + r
bind r source-file ~/.tmux.conf

# Binds prefix + j to resize the current pane downward by 5 cells
# The -r flag makes this repeatable, so you can hold j to continuously resize
bind -r j resize-pane -D 5

# Binds prefix + k to resize the current pane upward by 5 cells
# Repeatable binding allows continuous resizing without re-pressing the prefix
bind -r k resize-pane -U 5

# Binds prefix + l to resize the current pane to the right by 5 cells
# The repeatable flag enables smooth resizing by holding the key
bind -r l resize-pane -R 5

# Binds prefix + h to resize the current pane to the left by 5 cells
# These hjkl bindings mirror vim navigation for intuitive pane resizing
bind -r h resize-pane -L 5

# Binds prefix + m to toggle zoom on the current pane (maximize/restore)
# The -r flag allows you to quickly toggle zoom multiple times
# -Z flag zooms the pane to full screen or restores it to original size
bind -r m resize-pane -Z

# Binds prefix + Ctrl-j to open tmux-fzf session switcher
# Provides fuzzy finding for switching between tmux sessions
bind C-j run-shell -b "~/.tmux/plugins/tmux-fzf/scripts/session.sh switch"

# Enables mouse support in tmux for clicking, scrolling, and resizing panes
# This allows using the mouse to select panes, windows, and scroll through history
set -g mouse on

# Enables vi/vim-style key bindings in copy mode for familiar navigation
# This allows using vim movements (h,j,k,l) when scrolling through tmux history
set-window-option -g mode-keys vi

# In copy mode, pressing 'v' initiates visual selection like in vim
# This starts marking text for copying using vim-style visual mode
bind-key -T copy-mode-vi 'v' send -X begin-selection

# In copy mode, pressing 'y' copies the selected text to tmux's clipboard
# This yanks (copies) the selected text similar to vim's yank command
bind-key -T copy-mode-vi 'y' send -X copy-selection

# Removes the default behavior of exiting copy mode when mouse drag selection ends
# This keeps you in copy mode after selecting text with the mouse for additional operations
unbind -T copy-mode-vi MouseDragEnd1Pane

# Status bar styling (Ghostty cursor color)
set -g status-style 'bg=#00d9ff fg=#000000'

# Loads the tmux plugin manager (tpm) which manages tmux plugins
# This is the core plugin that enables installing and loading other plugins
set -g @plugin 'tmux-plugins/tpm'

# Loads the tmux-fzf plugin which provides fuzzy finding capabilities within tmux
# This adds fuzzy search for windows, sessions, commands, and more
set -g @plugin 'sainnhe/tmux-fzf'

# Loads vim-tmux-navigator plugin for seamless navigation between tmux panes and vim splits
# Allows using Ctrl+h/j/k/l to navigate between vim splits and tmux panes without switching modes
# This creates a unified navigation experience across vim and tmux
set -g @plugin 'christoomey/vim-tmux-navigator'

# Initializes the tmux plugin manager and loads all configured plugins
# This line must stay at the bottom of the config file to properly load plugins
# It runs the tpm script which installs and sources all plugins listed above
run '~/.tmux/plugins/tpm/tpm'
